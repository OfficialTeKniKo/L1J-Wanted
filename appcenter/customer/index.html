<!DOCTYPE html>
<html lang="en">
<head>
	<title>{SERVER_NAME}</title>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge" />

    <!-- Mobile -->
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="user-scalable=no, maximum-scale=1.0, minimum-scale=1.0, width=device-width, initial-scale=1.0" />

	<!-- css -->
    <link href="https://cdn.jsdelivr.net/npm/xeicon@2.3.3/xeicon.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/nc-cnb.css" />
    <link rel="stylesheet" href="/css/l1.main.css">
    <link rel="stylesheet" href="/css/my_style.css">
    <link rel="stylesheet" href="/css/jquery.scrollbar.css">
    
    <!-- js -->
 	<script src="/js/jquery-3.3.1.min.js"></script>
 	
 	<link rel="stylesheet" type="text/css" href="/css/layout_v2.css" media="screen" />
	<link rel="stylesheet" type="text/css" href="/css/myinfo.css" media="screen" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.4/pagination.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.4/pagination.css"/>
	<link rel="stylesheet" href="/css/custom.css"/>
 	
 	<!-- 스크립트 비활성화 유저 리다이렉트 -->
 	<noscript><meta http-equiv="Refresh" content="0; URL=http://www.enable-javascript.com/en/" /></noscript>
</head>
<script type="text/javascript">
function noBack(){	window.history.forward();	}

//전역 스크립트 변수 선언
const serverName	= '{SERVER_NAME}';
const suggestEnable	= '{SUGGEST_ENABLE}';
const getTime		= '{NOW}';
const cnb		= {CNB};
const pageCnbType	= {PAGE_CNB_TYPE};
const pageCnbSubType	= {PAGE_CNB_SUB_TYPE};
const account		= {USER_DATA};
</script>
<body class="page-customer">
	<!-- navi -->
	<div id="nc-cnb" class="nc-cnb nc-cnb--lineage custom-theme is-top" data-device="pc" data-ncc-device="pc" data-cnb-type="a" data-theme="lineage"></div>
	
	<div id="svg-container" style="display: none;"></div>
	
	<div id="container" class="container">
		<!-- page container -->
		<div class="wrap-header"><header class="header"><h1 class="header-title">Technical Support</h1></header></div>
		<div id="custmContainer">
			<header id="header">
				<div id="top_area">
					<div class="welcome">
						<div class="cs_info ng-scope">
							<span class="grade"><a class="" href=""></a></span>
							{HELLOW_MENT}
						</div>
					</div>
					<div class="userinfo">
						<ul>
							<li><a href="javascript:urlTypeform('1', '1', 'post', '/customer');">Inquiry details<span>NEW</span></a></li>
							<li><a href="javascript:urlTypeform('2', '2', 'post', '/customer');">Report Details<span>NEW</span></a></li>
						</ul>
					</div>
					<div id="search"><h1>{SERVER_NAME}&nbsp;Technical Support</h1></div>
				</div>
			</header>
			<section id="content">
				<div class="wrap_contents ng-scope">
					<div class="ng-scope tabmenue-area">
						<header class="tabmenu ng-scope">
							<ul>
								<li id="tab_1"><a href="javascript:urlTypeform('1', '1', 'post', '/customer');">Inquiry history</a></li>
								<li id="tab_2"><a href="javascript:urlTypeform('2', '2', 'post', '/customer');">Report Details</a></li>
							</ul>
						</header>
					</div>
					<div class="ng-scope" id="custom_main">
						<div class="table_view ng-scope"></div>
						<div class="pagination-container"></div>
					</div>
				</div>
				<div class="ng-scope">
					<aside class="ng-scope">
						<div class="ng-scope">
							<ul class="bannerRenew">
								<li><a href="javascript:normalList();">Frequently Asked Questions (FAQ)</a></li>
								<li><a href="/customer/support">Sponsorship information</a></li>
								<!--<li><a href="javascript:;">Compensation information<br>(in progress)</a></li>-->
								<li>{TELEGRAM_URL}</li>
							</ul>
						</div>
					</aside>
				</div>
			</section>
			<div class="footerWrap"></div>
		</div>
	
		<!-- wrap-footer -->
		<div class="wrap-footer"></div>
	</div>
	
	<!-- popup -->
	<div id="layer_alert" class="default" style="display:none;"></div>
	<div class="dimmed" style="display: none;">dimmed</div>

	<!-- script -->
	<script src="/js/jquery.scrollbar.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
	<script src="/js/jquery.number.min.js"></script>
	<script src="/js/util.js"></script>
 	<script src="/js/init.js"></script>
 	<script src="/js/popup.js"></script>
 	<script src="/js/storage.js"></script>
 	
<script>

function getLocaleDateString() {
  const formats = {
    "af-ZA": "YYYY/MM/DD",
    "aM-ET": "D/M/YYYY",
    "ar-AE": "DD/MM/YYYY",
    "ar-BH": "DD/MM/YYYY",
    "ar-DZ": "DD-MM-YYYY",
    "ar-EG": "DD/MM/YYYY",
    "ar-IQ": "DD/MM/YYYY",
    "ar-JO": "DD/MM/YYYY",
    "ar-KW": "DD/MM/YYYY",
    "ar-LB": "DD/MM/YYYY",
    "ar-LY": "DD/MM/YYYY",
    "ar-MA": "DD-MM-YYYY",
    "ar-OM": "DD/MM/YYYY",
    "ar-QA": "DD/MM/YYYY",
    "ar-SA": "DD/MM/YY",
    "ar-SY": "DD/MM/YYYY",
    "ar-TN": "DD-MM-YYYY",
    "ar-YE": "DD/MM/YYYY",
    "arn-CL": "DD-MM-YYYY",
    "as-IN": "DD-MM-YYYY",
    "az-CYrl-AZ": "DD.MM.YYYY",
    "az-Latn-AZ": "DD.MM.YYYY",
    "ba-RU": "DD.MM.YY",
    "be-BY": "DD.MM.YYYY",
    "bg-BG": "DD.M.YYYY",
    "bn-BD": "DD-MM-YY",
    "bn-IN": "DD-MM-YY",
    "bo-CN": "YYYY/M/D",
    "br-FR": "DD/MM/YYYY",
    "bs-CYrl-BA": "D.M.YYYY",
    "bs-Latn-BA": "D.M.YYYY",
    "ca-ES": "DD/MM/YYYY",
    "co-FR": "DD/MM/YYYY",
    "cs-CZ": "D.M.YYYY",
    "cY-GB": "DD/MM/YYYY",
    "Da-DK": "DD-MM-YYYY",
    "De-AT": "DD.MM.YYYY",
    "De-CH": "DD.MM.YYYY",
    "De-DE": "DD.MM.YYYY",
    "De-LI": "DD.MM.YYYY",
    "De-LU": "DD.MM.YYYY",
    "Dsb-DE": "D. M. YYYY",
    "Dv-MV": "DD/MM/YY",
    "el-GR": "D/M/YYYY",
    "en-029": "MM/DD/YYYY",
    "en-AU": "D/MM/YYYY",
    "en-BZ": "DD/MM/YYYY",
    "en-CA": "DD/MM/YYYY",
    "en-GB": "DD/MM/YYYY",
    "en-IE": "DD/MM/YYYY",
    "en-IN": "DD-MM-YYYY",
    "en-JM": "DD/MM/YYYY",
    "en-MY": "D/M/YYYY",
    "en-NZ": "D/MM/YYYY",
    "en-PH": "M/D/YYYY",
    "en-SG": "D/M/YYYY",
    "en-TT": "DD/MM/YYYY",
    "en-US": "M/D/YYYY",
    "en-ZA": "YYYY/MM/DD",
    "en-ZW": "M/D/YYYY",
    "es-AR": "DD/MM/YYYY",
    "es-BO": "DD/MM/YYYY",
    "es-CL": "DD-MM-YYYY",
    "es-CO": "DD/MM/YYYY",
    "es-CR": "DD/MM/YYYY",
    "es-DO": "DD/MM/YYYY",
    "es-EC": "DD/MM/YYYY",
    "es-ES": "DD/MM/YYYY",
    "es-GT": "DD/MM/YYYY",
    "es-HN": "DD/MM/YYYY",
    "es-MX": "DD/MM/YYYY",
    "es-NI": "DD/MM/YYYY",
    "es-PA": "MM/DD/YYYY",
    "es-PE": "DD/MM/YYYY",
    "es-PR": "DD/MM/YYYY",
    "es-PY": "DD/MM/YYYY",
    "es-SV": "DD/MM/YYYY",
    "es-US": "M/D/YYYY",
    "es-UY": "DD/MM/YYYY",
    "es-VE": "DD/MM/YYYY",
    "et-EE": "D.MM.YYYY",
    "eu-ES": "YYYY/MM/DD",
    "fa-IR": "MM/DD/YYYY",
    "fi-FI": "D.M.YYYY",
    "fil-PH": "M/D/YYYY",
    "fo-FO": "DD-MM-YYYY",
    "fr-BE": "D/MM/YYYY",
    "fr-CA": "YYYY-MM-DD",
    "fr-CH": "DD.MM.YYYY",
    "fr-FR": "DD/MM/YYYY",
    "fr-LU": "DD/MM/YYYY",
    "fr-MC": "DD/MM/YYYY",
    "fY-NL": "D-M-YYYY",
    "ga-IE": "DD/MM/YYYY",
    "gD-GB": "DD/MM/YYYY",
    "gl-ES": "DD/MM/YY",
    "gsw-FR": "DD/MM/YYYY",
    "gu-IN": "DD-MM-YY",
    "ha-Latn-NG": "D/M/YYYY",
    "he-IL": "DD/MM/YYYY",
    "hi-IN": "DD-MM-YYYY",
    "hr-BA": "D.M.YYYY.",
    "hr-HR": "D.M.YYYY",
    "hsb-DE": "D. M. YYYY",
    "hu-HU": "YYYY. MM. DD.",
    "hY-AM": "DD.MM.YYYY",
    "iD-ID": "DD/MM/YYYY",
    "ig-NG": "D/M/YYYY",
    "ii-CN": "YYYY/M/D",
    "is-IS": "D.M.YYYY",
    "it-CH": "DD.MM.YYYY",
    "it-IT": "DD/MM/YYYY",
    "iu-Cans-CA": "D/M/YYYY",
    "iu-Latn-CA": "D/MM/YYYY",
    "ja-JP": "YYYY/MM/DD",
    "ka-GE": "DD.MM.YYYY",
    "kk-KZ": "DD.MM.YYYY",
    "kl-GL": "DD-MM-YYYY",
    "kM-KH": "YYYY-MM-DD",
    "kn-IN": "DD-MM-YY",
    "ko-KR": "YYYY. MM. DD",
    "kok-IN": "DD-MM-YYYY",
    "kY-KG": "DD.MM.YY",
    "lb-LU": "DD/MM/YYYY",
    "lo-LA": "DD/MM/YYYY",
    "lt-LT": "YYYY.MM.DD",
    "lv-LV": "YYYY.MM.DD.",
    "Mi-NZ": "DD/MM/YYYY",
    "Mk-MK": "DD.MM.YYYY",
    "Ml-IN": "DD-MM-YY",
    "Mn-MN": "YY.MM.DD",
    "Mn-Mong-CN": "YYYY/M/D",
    "Moh-CA": "M/D/YYYY",
    "Mr-IN": "DD-MM-YYYY",
    "Ms-BN": "DD/MM/YYYY",
    "Ms-MY": "DD/MM/YYYY",
    "Mt-MT": "DD/MM/YYYY",
    "nb-NO": "DD.MM.YYYY",
    "ne-NP": "M/D/YYYY",
    "nl-BE": "D/MM/YYYY",
    "nl-NL": "D-M-YYYY",
    "nn-NO": "DD.MM.YYYY",
    "nso-ZA": "YYYY/MM/DD",
    "oc-FR": "DD/MM/YYYY",
    "or-IN": "DD-MM-YY",
    "pa-IN": "DD-MM-YY",
    "pl-PL": "DD.MM.YYYY",
    "prs-AF": "DD/MM/YY",
    "ps-AF": "DD/MM/YY",
    "pt-BR": "D/M/YYYY",
    "pt-PT": "DD-MM-YYYY",
    "qut-GT": "DD/MM/YYYY",
    "quz-BO": "DD/MM/YYYY",
    "quz-EC": "DD/MM/YYYY",
    "quz-PE": "DD/MM/YYYY",
    "rM-CH": "DD/MM/YYYY",
    "ro-RO": "DD.MM.YYYY",
    "ru-RU": "DD.MM.YYYY",
    "rw-RW": "M/D/YYYY",
    "sa-IN": "DD-MM-YYYY",
    "sah-RU": "MM.DD.YYYY",
    "se-FI": "D.M.YYYY",
    "se-NO": "DD.MM.YYYY",
    "se-SE": "YYYY-MM-DD",
    "si-LK": "YYYY-MM-DD",
    "sk-SK": "D. M. YYYY",
    "sl-SI": "D.M.YYYY",
    "sMa-NO": "DD.MM.YYYY",
    "sMa-SE": "YYYY-MM-DD",
    "sMj-NO": "DD.MM.YYYY",
    "sMj-SE": "YYYY-MM-DD",
    "sMn-FI": "D.M.YYYY",
    "sMs-FI": "D.M.YYYY",
    "sq-AL": "YYYY-MM-DD",
    "sr-CYrl-BA": "D.M.YYYY",
    "sr-CYrl-CS": "D.M.YYYY",
    "sr-CYrl-ME": "D.M.YYYY",
    "sr-CYrl-RS": "D.M.YYYY",
    "sr-Latn-BA": "D.M.YYYY",
    "sr-Latn-CS": "D.M.YYYY",
    "sr-Latn-ME": "D.M.YYYY",
    "sr-Latn-RS": "D.M.YYYY",
    "sv-FI": "D.M.YYYY",
    "sv-SE": "YYYY-MM-DD",
    "sw-KE": "M/D/YYYY",
    "sYr-SY": "DD/MM/YYYY",
    "ta-IN": "DD-MM-YYYY",
    "te-IN": "DD-MM-YY",
    "tg-CYrl-TJ": "DD.MM.YY",
    "th-TH": "D/M/YYYY",
    "tk-TM": "DD.MM.YY",
    "tn-ZA": "YYYY/MM/DD",
    "tr-TR": "DD.MM.YYYY",
    "tt-RU": "DD.MM.YYYY",
    "tzM-Latn-DZ": "DD-MM-YYYY",
    "ug-CN": "YYYY-M-D",
    "uk-UA": "DD.MM.YYYY",
    "ur-PK": "DD/MM/YYYY",
    "uz-CYrl-UZ": "DD.MM.YYYY",
    "uz-Latn-UZ": "DD/MM YYYY",
    "vi-VN": "DD/MM/YYYY",
    "wo-SN": "DD/MM/YYYY",
    "xh-ZA": "YYYY/MM/DD",
    "Yo-NG": "D/M/YYYY",
    "zh-CN": "YYYY/M/D",
    "zh-HK": "D/M/YYYY",
    "zh-MO": "D/M/YYYY",
    "zh-SG": "D/M/YYYY",
    "zh-TW": "YYYY/M/D",
    "zu-ZA": "YYYY/MM/DD",
  };

  return formats[navigator.language] || "DD/MM/YYYY";
}


	includeHTML(document.querySelector('#svg-container'), '/svg.html');
	var CUSTOM_TYPE	= '{CUSTOM_TYPE}';
	$('#tab_' + CUSTOM_TYPE).addClass('on');
	const is_gm = account != undefined && account.gm;
	const account_name = account != undefined ? account.name : '';
	var paginationRendere = function(){
		let container = $('.pagination-container');
	    container.pagination({
	    	dataSource: function(done) {
	    	    $.ajax({
	    	        type: 'POST',
	    	        url: '/define/customer',
	    	        data: { type: CUSTOM_TYPE, login : account_name},
	    	        success: function(response) {
	    	        	var noticeHtml = 
	    	        		'<div class="notice ng-scope">' + 
	    	        			'<strong class="ng-binding ng-scope">[ ' + account_name + ' ] last 6 months ' + (CUSTOM_TYPE == '1' ? 'Inquiry: ' : 'Report: ') + (response === null || response === undefined || response.length <= 0 ? 'No history.' : 'History.') + '</strong>' +
					'<button onClick="customWrite(\'{CUSTOM_TYPE}\')" style="float: right; width: 115px; height: 39px; background: #6e7482 none; color: #fff; font-size: 16px; font-weight: 600; margin-top: -7px;">' + (CUSTOM_TYPE == '1' ? 'Inquiry' : 'Report') + ' Enter</button>' +
	    	        		'</div>' + 
	    	        		'<table class="table_list ng-scope"></table>';
			$('#custom_main').prepend(noticeHtml);
	    	            done(response);
	    	        }
	    	    });
	    	},
	    	pageSize: 5,// 한 화면에 보여질 개수
	    	showPrevious: false,// 처음버튼 삭제
	        showNext: false,// 마지막버튼 삭제
	        showPageNumbers: true,// 페이지 번호표시
	        callback: function (data, pagination) {// 화면 출력
	            var dataHtml = '';
	            dataHtml += 
	        		'<tbody>' +
	        			'<tr>' +
	        				'<th class="th_part">Service</th>' +
	        				'<th class="th_subject">Title</th>' +
	        				'<th class="th_status"Progress Status</th>' +
	        				'<th class="th_status_date">Date</th>' +
	        			'</tr>' +
	        		'</tbody>' +
	        		'<tbody>';
	            if (data.length > 0) {
	            	$.each(data, function (index, item) {
	            		dataHtml +=
	            			'<tr class="ng-scope" data-id="' + item.id + '" onClick="customView(\'{CUSTOM_TYPE}\', ' + item.rownum + ');">' +
	                   			'<td class="ng-binding">{SERVER_NAME}</td>' +
	                   			'<td class="subject"><a class="ng-binding">' + item.title + '</a></td>' +
	                   			'<td class="ng-binding ng-scope">' + item.status + '</td>' +
	                   			'<td class="date ng-binding">' + moment(item.date).format(getLocaleDateString()) + '</td>' +
	                   		'</tr>';
	                });
	            }
	            dataHtml += '</tbody>';
	            $(".table_list").html(dataHtml);// 렌더링
	        }
	    });
	}

	var customViewBackBtn = function(){
		$('.table_view').html('');
		paginationRendere();
	}

	function customView(customType, customRownum){
		$.ajax ({
			type:"post",
			datatype:"json",
			url:'/define/customer/view',
			data: { type: customType, rownum : customRownum},
			success:function(data){
				if (data != null && data != undefined) {
					var viwHtml = 
						'<div class="table_view ng-scope">' +
							'<header class="view_subject ng-scope"><p class="ng-binding">' + data.title + '</p><a id="layer_open" class="btn_delete" href="javascript:customDelete(' + customType + ', ' + data.rownum + ')">' + (customType == '1' ? 'Delete inquiry' : 'Delete report') + '</a></header>' +
							(data.status == 'Answered' ? 
							'<div class="ng-scope">' +
								'<div class="view reply subject">' +
									'<header class="ng-binding">[Answer]<span class="date ng-binding">' + moment(data.commentDate).format(getLocaleDateString()) + '</span></header>' +
									'<article class="ng-binding">' + data.comment + '</article>' +
								'</div>' +
							'</div>' : '') +
							'<div class="ng-scope">' +
								'<div class="view">' +
									'<header class="ng-binding req">' + (customType == '1' ? '[Inquiry]' : '[Report]') + '<span class="date ng-binding">' + moment(data.date).format(getLocaleDateString()) + '</span></header>' +
									'<article class="ng-binding">' + data.content + '</article>' +
									(data.status == 'Submitted' && is_gm ? 
									'<div class="custom_comment">' +
										'<p style="padding: 10px 10px;font-size: 16px;font-weight: 600;color: #718fb5;">Account name : ' + data.login + '</p>' +
										'<textarea id="testContent" name="comment" required="" placeholder="Please enter your answer" maxlength="4500" class="ng-pristine ng-invalid ng-invalid-required ng-valid-maxlength"></textarea>' +
										'<p class="btn_typeA_gray clear" onClick="commentWriteSubmit(' + customType + ', ' + customRownum + ');"><span class="btn" id="spnRemoveContent">Answer</span></p>' +
									'</div>'
									: '') +
								'</div>' +	
							'</div>' +
							'<div class="button ng-scope" style="padding-bottom: 60px;">' +
								'<p class="btn_typeA" onClick="customViewBackBtn();"><span class="btn">Return</span></p>' +
							'</div>' +
						'</div>';
					$('.notice').remove();
					$('.table_list').remove('');
					$('.pagination-container').html('');
					$('.table_view').html(viwHtml);
				}
			}, error: function(request, status, error){
				console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
			}
		});
	}
	
	function customDelete(customType, customRownum){
		popupShow('Are you sure you want to delete it?', '<span class="type2"><a href="javascript:popupClose();" class="close">No</a></span>', '<span class="type1"><a href="javascript:customDeleteAction(' + customType + ',' + customRownum + ');" class="close">Yes</a></span>');
	}
	
	function customDeleteAction(customType, customRownum){
		$.ajax ({
			type:"post",
			datatype:"json",
			url:'/define/customer/delete',
			data: { type: customType, rownum : customRownum},
			success:function(data){
				if (data) {
					customViewBackBtn();
					popupClose();
				} else {
					popupShow('Delete failed.', '<span class="type2"><a href="javascript:popupClose();" class="close">Close</a></span>', null);
				}
			}, error: function(request, status, error){
				console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
			}
		});
	}
	
	function customWrite(customType){
		var writeFromHtml = 
			'<div class="faq_write" id="inquiryWrite">' +
				'<form id="addTicket" name="addTicket" class="ng-pristine ng-invalid ng-invalid-required">' +
					'<input type="hidden" name="customType" value="' + customType + '"/>' +
					'<table class="inquiryFormTalbe">' +
						'<caption><em>*</em> The marked fields are required, please be sure to fill them in.</caption>' +
						'<tbody class="ng-scope ng-pristine ng-valid">' +
							'<tr class="inquiry ng-scope">' +
								'<th class="ng-binding"><em>*</em>' + (customType === '1' ? 'Inquiry Title' : 'Report Title') + '</th>' +
								'<td class="subject">' +
									'<input type="text" id="testSubject" name="subject" required="" placeholder="Please enter a title" maxlength="50" class="ng-pristine ng-valid-maxlength ng-valid-minlength ng-invalid ng-invalid-required">' +
								'</td>' +
							'</tr>' +
						'</tbody>' +
						'<tbody class="ng-scope ng-pristine ng-valid">' +
							'<tr class="inquiry ng-scope">' +
								'<th class="ng-binding"><em>*</em>' + (customType === '1' ? 'Inquiry Content' : 'Report Content') + '</th>' +
								'<td>' +
									'<span class="txt ng-binding"><ul><li>Remember that the reward obtained will be proportional to the importance of the reported bug or illegal program.</li>  <li><strong><em>Accounts that make false reports will be sanctioned.</em></strong></li> </ul></span>' +
									'<textarea id="testContent" name="content" required="" placeholder="Please enter your content" maxlength="4500" class="ng-pristine ng-invalid ng-invalid-required ng-valid-maxlength"></textarea>' +
								'</td>' +
							'</tr>' +
						'</tbody>' +
					'</table>' +
					'<div class="button">' +
						'<p class="btn_typeA" onClick="writeFormSubmit();"><span class="btn">' + (customType === '1' ? 'Enter Inquiry' : 'Enter Report') + '</span></p>' +
						'<p class="btn_typeA_gray clear" onClick="writeFormReset();"><span class="btn" id="spnRemoveContent">Delete content</span></p>' +
					'</div>' +
				'</form>' +
			'</div>';
		$('.notice').remove();
		$('.table_list').remove('');
		$('.pagination-container').html('');
		$('#custom_main').prepend(writeFromHtml);
	}
	
	var writeFormReset = function(){
		var writeForm = document.addTicket;
		writeForm.subject.value='';
		writeForm.content.value='';
	}
	
	var writeFormSubmit = function(){
		var writeForm = document.addTicket;
		if (!writeForm.subject.value) {
			popupShow('Please enter the subject.', '<span class="type2"><a href="javascript:popupClose();" class="close">Close</a></span>', null);
			writeForm.subject.focus();
			return;
		}
		if (!writeForm.content.value) {
			popupShow('Please enter the details.', '<span class="type2"><a href="javascript:popupClose();" class="close">Close</a></span>', null);
			writeForm.content.focus();
			return;
		}
		$.ajax ({
			type:"post",
			datatype:"json",
			url:'/define/customer/insert',
			data: $(writeForm).serialize(),
			success:function(data){
				if (data) {
					popupShow('Inquiry / Report received.', '<span class="type2"><a href="javascript:popupClose();" class="close">Close</a></span>', null);
					$('#inquiryWrite').remove();
					paginationRendere();
				} else {
					popupShow('Inquiry/Report has failed.', '<span class="type2"><a href="javascript:popupClose();" class="close">Close</a></span>', null);
				}
			}, error: function(request, status, error){
				console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
			}
		});
	}
	
	var commentWriteSubmit = function(customType, customRownum){
		var comment = $('.custom_comment > textarea');
		if (comment.val().length <= 0) {
			popupShow('Please enter your answer.', '<span class="type2"><a href="javascript:popupClose();" class="close">Close</a></span>', null);
			comment.focus();
			return;
		}
		if (confirm('Are you sure you want to enter your answer?')) {
			var sendData = {type:customType, rownum:customRownum, comment:$(comment).val()};
			$.ajax ({
				type:"post",
				datatype:"json",
				url:'/define/customer/comment/insert',
				data: sendData,
				success:function(data){
					if (data) {
						customViewBackBtn();
					} else {
						popupShow('Answer failed', '<span class="type2"><a href="javascript:popupClose();" class="close">Close</a></span>', null);
					}
				}, error: function(request, status, error){
					console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
				}
			});
		}
	}
	
	var normalList = function(){
		$('.tabmenue-area').css('display','none');
		$('.table_view').html('');
		$('.notice').remove();
		$('.table_list').remove('');
		$('.pagination-container').html('');
		$('.faq_write').remove();
		$('.detailFaqAddForm').remove();
		$('.btns-add').remove();
		paginationNormalRendere();
	}
	
	var paginationNormalRendere = function(){
		let container = $('.pagination-container');
	    container.pagination({
	    	dataSource: function(done) {
	    	    $.ajax({
	    	        type: 'POST',
	    	        url: '/define/customer/normal',
	    	        success: function(response) {
	    	        	var normalInitHtml = '<table class="table_list ng-scope"></table>';
	    	        	if (is_gm) {
				normalInitHtml += '<div class="btns-add"><button type="button" onClick="detailFaqAddForm();" >Add</button></div>';
			}
			$('#custom_main').prepend(normalInitHtml);
	    	            done(response);
	    	        }
	    	    });
	    	},
	    	pageSize: 5,// 한 화면에 보여질 개수
	    	showPrevious: false,// 처음버튼 삭제
	        showNext: false,// 마지막버튼 삭제
	        showPageNumbers: true,// 페이지 번호표시
	        callback: function (data, pagination) {// 화면 출력
	            var dataHtml = '<tbody><tr><th class="th_part">Service</th><th class="th_subject">Frequently Asked Questions</th></tr></tbody><tbody>';
	            if (data.length > 0) {
	            	$.each(data, function (index, item) {
	            		dataHtml +=
	            			'<tr class="ng-scope" onClick="detailFaq(' + item.id + ');">' +
	                   			'<td class="ng-binding normalFrontIcon">Q</td>' +
	                   			'<td class="subject"><a class="ng-binding">' + item.title + '</a><span class="arrowQ"></span>' +
	                   				'<div class="detailFaq detailFaq' + item.id + '"><div class="normalContent">' + item.content + '</div>' +
	                   					(is_gm ? 
	                   					'<div class="btns"><a href="#" onClick="detailFaqUpdate(' + item.id + ', event);">Modify</a><a href="#" onClick="detailFaqDelete(' + item.id + ', event);">Delete</a></div>' : ''
	                   					) +
	                   				'</div>' +
	                   			'</td>' +
	                   		'</tr>';
	                });
	            }
	            dataHtml += '</tbody>';
	            $(".table_list").html(dataHtml);// 렌더링
	        }
	    })
	}
	
	var detailFaqAddForm = function(){
		var addFormHtml = 
			'<div class="detailFaqAddForm">' +
				'<div class="detail-item"><label>Title</label><input type="text" class="faqTitle" name="faqTitle" placeholder="Please enter a subject." /></div>' +
				'<div class="detail-item"><label>Detail</label><textarea class="faqContent" name="faqContent" placeholder="Please enter the content." ></textarea></div>' +
				'<div class="btns"><button type="button" onClick="detailFaqAddCancle();">Cancel</button><button type="button" onClick="detailFaqAddComplete();">Enter</button>' +
			'</div>';
		$('.table_view').html('');
		$('.notice').remove();
		$('.table_list').remove('');
		$('.pagination-container').html('');
		$('.faq_write').remove();
		$('.detailFaqAddForm').remove();
		$('.btns-add').remove();
		$('#custom_main').prepend(addFormHtml);
	}
	
	var detailFaqAddCancle = function(){
		normalList();
	}
	
	var detailFaqAddComplete = function(){
		var faqTitle	= $('.detailFaqAddForm .faqTitle').val();
		var faqContent	= $('.detailFaqAddForm .faqContent').val();
		if (faqTitle.length <= 0 || faqContent.length <= 0) {
			popupShow('Please enter the required fields.', '<span class="type2"><a href="javascript:popupClose();" class="close">Close</a></span>', null);
			return;
		}
		var senddata = {"faqTitle":faqTitle, "faqContent":faqContent};
		$.ajax ({
			type:"post",
			datatype:"json",
			url:"/define/customer/normal/insert",
			data:senddata,
			success:function(data){
				if (data) {
					normalList();
				}
			}, error: function(request, status, error){
				console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
			}
		});
	}
	
	var detailFaqUpdate = function(id, event){
		var faqTile = $('.detailFaq' + id).parent('.subject').find('.ng-binding').html();
		var faqContent = $('.detailFaq' + id).children('.normalContent').html();
		var updateForm = 
			'<div class="faqUpdateForm">' + 
				'<input type="hidden" class="faqId" name="faqId" value="' + id + '" />' +
				'<input type="hidden" class="faqCon" name="faqCon" value="' + faqContent + '" />' +
				'<input type="text" class="faqTitle" name="faqTitle" value="' + faqTile + '" />' +
				'<textarea class="faqContent" name="faqContent" value="' + faqContent + '">' + faqContent + '</textarea>' + 
				'<div class="btns"><button type="button" onClick="detailFaqUpdateComplete(' + id + ', event);">Enter</button><button type="button" onClick="detailFaqUpdateCancle(' + id + ', event);">Cancel</button></div>' +
			'</div>';
		$('.detailFaq' + id).html(updateForm);
		$('.detailFaq' + id).closest('.ng-scope').addClass('up');
		eventStop(event);
	}
	
	var detailFaqUpdateComplete = function(id, event){
		var faqTitle = $('.detailFaq' + id).find('.faqTitle').val();
		var faqContent = $('.detailFaq' + id).find('.faqContent').val();
		var senddata = {"faqId":id, "faqTitle":faqTitle, "faqContent":faqContent};
		$.ajax ({
			type:"post",
			datatype:"json",
			url:"/define/customer/normal/update",
			data:senddata,
			success:function(data){
				if (data) {
					$('.detailFaq' + id).parent('.subject').find('.ng-binding').html(faqTitle);
					var updateHtml = 
						'<div class="normalContent">' + faqContent + '</div>' +
							(is_gm ? 
							'<div class="btns"><a href="#" onClick="detailFaqUpdate(' + id + ', event);">Modify</a><a href="#" onClick="detailFaqDelete(' + id + ', event);">Delete</a>' : ''
							) +
						'</div>';
					$('.detailFaq' + id).html(updateHtml);
					$('.detailFaq' + id).closest('.ng-scope').removeClass('up');
				}
			}, error: function(request, status, error){
				console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
			}
		});
		eventStop(event);
	}
	
	var detailFaqUpdateCancle = function(id, event){
		$('.detailFaq' + id).closest('.ng-scope').removeClass('up');
		var faqContent = $('.detailFaq' + id).find('.faqCon').val();
		var returnHtml = 
			'<div class="normalContent">' + faqContent + '</div>' +
				(is_gm ? 
				'<div class="btns"><a href="#" onClick="detailFaqUpdate(' + id + ', event);">Modify</a><a href="#" onClick="detailFaqDelete(' + id + ', event);">Delete</a>' : ''
				) +
			'</div>';
		$('.detailFaq' + id).html(returnHtml);
		eventStop(event);
	}
	
	var detailFaqDelete = function(id, event){
		if (confirm('Are you sure you want to delete it?')) {
			$.ajax ({
				type:"post",
				datatype:"json",
				url:"/define/customer/normal/delete",
				data:{"id": id},
				success:function(data){
					if (data) {
						$('.table_list').remove();
						paginationNormalRendere();
					}
				}, error: function(request, status, error){
					console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
				}
			});
		}
		eventStop(event);
	}
	
	var detailFaq = function(faqCd){
		if ($('.detailFaq').closest('.ng-scope').hasClass('up')) {
			return false;
		}
		if ($('.detailFaq'+faqCd).hasClass("selected")) {
			$('.detailFaq'+faqCd).parent('.subject').find('span').removeClass('selected');
			$('.detailFaq'+faqCd).removeClass("selected");
			$('.detailFaq'+faqCd).slideUp();
		} else {
			$('.detailFaq').parent('.subject').find('span').removeClass('selected');
			$('.detailFaq').removeClass("selected");
			$('.detailFaq').slideUp();
			$('.detailFaq'+faqCd).addClass("selected");
			$('.detailFaq'+faqCd).parent('.subject').find('span').addClass('selected');
			$('.detailFaq'+faqCd).slideDown();
		}
		return false;
	}
	
	// 최초 렌더링
	$(document).ready(function(){
		if (CUSTOM_TYPE == '0') {
			normalList();
		} else {
			if (account != undefined) {
				paginationRendere();
			} else {
				$('#custom_main').prepend('<table class="table_list ng-scope"><div class="notice noaccount"><strong>You can check it after logging in.</strong></div></table>');
			}
		}
	});
</script>
</body>
</html>